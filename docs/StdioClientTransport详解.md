
# æœ¬åœ° IPCï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰StdioClientTransport è¯¦è§£

## ğŸ§  ä»€ä¹ˆæ˜¯ `StdioClientTransport`ï¼Ÿ

`StdioClientTransport` æ˜¯ä¸€ç§é€šè¿‡**æ ‡å‡†è¾“å…¥ï¼ˆstdinï¼‰/è¾“å‡ºï¼ˆstdoutï¼‰è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰**çš„ä¼ è¾“æ–¹å¼ï¼Œé€šå¸¸ç”¨äºä¸»ç¨‹åºï¼ˆå®¢æˆ·ç«¯ï¼‰ä¸å…¶å­è¿›ç¨‹ï¼ˆæœåŠ¡ç«¯ï¼‰ä¹‹é—´ä¼ é€’ç»“æ„åŒ–æ¶ˆæ¯ï¼ˆå¦‚ JSON-RPC åè®®æ¶ˆæ¯ï¼‰ã€‚

> âš™ï¸ å…¸å‹åœºæ™¯ï¼š**å®¢æˆ·ç«¯å¯åŠ¨ä¸€ä¸ªæœ¬åœ°è„šæœ¬ä½œä¸ºå­è¿›ç¨‹ï¼Œå¹¶é€šè¿‡å®ƒçš„ stdin/stdout ç®¡é“ä¸ä¹‹é€šä¿¡ã€‚**

---

## ğŸ§± æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | æè¿° |
|------|------|
| é€šä¿¡æ–¹å¼ | æ ‡å‡†è¾“å…¥ï¼ˆå†™å…¥ï¼‰ + æ ‡å‡†è¾“å‡ºï¼ˆè¯»å–ï¼‰ |
| åè®® | é€šå¸¸æ‰¿è½½ JSON-RPCã€LSPã€MCP ç­‰åè®® |
| è¿æ¥æ€§è´¨ | æœ¬åœ°è¿›ç¨‹é—´é€šä¿¡ï¼Œä¸ä¾èµ–ç½‘ç»œ |
| å¯åŠ¨æ–¹å¼ | å®¢æˆ·ç«¯å¯åŠ¨æœåŠ¡ç«¯ä¸ºå­è¿›ç¨‹ |
| æ”¯æŒæ–¹å‘ | å…¨åŒå·¥ï¼ˆClient â†” Serverï¼‰ |
| ä¾èµ– | æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹/IO ç®¡é“èƒ½åŠ› |
| é€šä¿¡æ ¼å¼ | é€šå¸¸æ˜¯çº¯æ–‡æœ¬åè®®ï¼Œå¦‚ JSONï¼ˆé…åˆ Content-Lengthï¼‰ |

---

## ğŸ§° å¸¸è§ä½¿ç”¨åœºæ™¯

| åœºæ™¯ | æè¿° |
|------|------|
| ğŸ”¤ è¯­è¨€æœåŠ¡å™¨åè®®ï¼ˆLSPï¼‰ | ç¼–è¾‘å™¨ï¼ˆå¦‚ VSCodeï¼‰é€šè¿‡ `stdio` ä¸è¯­è¨€æœåŠ¡é€šä¿¡ |
| ğŸ§  æœ¬åœ° AI å·¥å…· / MCP å·¥å…· | ä¸»è¿›ç¨‹ï¼ˆJS/TSï¼‰ä¸æœ¬åœ°æ¨¡å‹åç«¯ï¼ˆPython/Java/C++ï¼‰äº¤äº’ |
| âš™ï¸ å‘½ä»¤è¡Œå·¥å…·æ‰©å±• | çˆ¶è¿›ç¨‹è°ƒç”¨æ‰©å±•è„šæœ¬å¹¶ä¸å…¶é€šä¿¡ï¼ˆä¸ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶æˆ–ç½‘ç»œï¼‰ |
| ğŸ§ª æ’ä»¶ç³»ç»Ÿé€šä¿¡ | å®¹å™¨/å®¿ä¸»ä¸æ’ä»¶ä¹‹é—´é€šè¿‡ stdio äº¤äº’ |

---

## ğŸ”§ é€šä¿¡æµç¨‹è¯¦è§£ï¼ˆJSON-RPC ç¤ºä¾‹ï¼‰

```js
Content-Length: 73\r\n
\r\n
{"jsonrpc":"2.0","id":1,"method":"echo","params":{"text":"hello"}}
```

```text
[çˆ¶è¿›ç¨‹]
 â†“ å†™å…¥ stdin
[å­è¿›ç¨‹]
 â†“ è¯»å– stdinï¼Œå¤„ç†é€»è¾‘
 â†‘ å†™å…¥ stdout
[çˆ¶è¿›ç¨‹]
 â† è¯»å– stdout
```

---

## ğŸ’¡ ç¤ºä¾‹ï¼šåœ¨ Node.js ä¸­ä½¿ç”¨ `StdioClientTransport`

**å®¢æˆ·ç«¯ï¼ˆNode.jsï¼‰**

```ts
import { spawn } from 'child_process';

const child = spawn('python', ['my_server.py'], {
  stdio: ['pipe', 'pipe', 'pipe'],
});

child.stdin.write('Content-Length: 50\r\n\r\n{"jsonrpc":"2.0","method":"ping"}');

child.stdout.on('data', (data) => {
  console.log('æ”¶åˆ°å“åº”:', data.toString());
});
```

**æœåŠ¡ç«¯ï¼ˆPythonï¼‰**

```python
import sys

def handle_message(line):
    print("Content-Length: 50\r\n\r\n{\"result\":\"pong\"}", flush=True)

while True:
    line = sys.stdin.readline()
    if not line:
        break
    handle_message(line)
```

---

## ğŸ“¦ å®é™…æ¡†æ¶æ”¯æŒ

| æ¡†æ¶/å·¥å…· | åº”ç”¨æ–¹å¼ |
|-----------|-----------|
| VSCode LSP | ä½¿ç”¨ `stdio` è¿æ¥è¯­è¨€æœåŠ¡è¿›ç¨‹ |
| OpenAI MCP å·¥å…· | `StdioClientTransport` è¿æ¥ Python/Java å·¥å…· |
| LanguageClient-Neovim | åŸºäº `stdio` å®ç° LSP é€šä¿¡ |
| Tauri | Rust ä¸»ç¨‹åºé€šè¿‡ stdio ä¸ CLI å­ç¨‹åºé€šä¿¡ |
| Deno / Bun | è¿è¡Œå­è¿›ç¨‹è„šæœ¬å¹¶å¤„ç†å…¶ stdout ä½œä¸º RPC è¿”å› |

---

## ğŸ”„ ä¸å…¶ä»–ä¼ è¾“æ–¹å¼å¯¹æ¯”

| ç±»å‹ | æè¿° | æ˜¯å¦è·¨ç½‘ç»œ | æ˜¯å¦ä¾èµ–ç«¯å£ | æ€§èƒ½ | åº”ç”¨åœºæ™¯ |
|------|------|-------------|----------------|--------|----------|
| `StdioClientTransport` | æœ¬åœ°å­è¿›ç¨‹é€šè¿‡ stdin/stdout é€šä¿¡ | âŒ | âŒ | âœ… é«˜ | æœ¬åœ°æ’ä»¶ / æœ¬åœ° AI |
| `HttpClientTransport` | ä½¿ç”¨ HTTP è¯·æ±‚ | âœ… | âœ… | ä¸­ | è¿œç¨‹ REST æœåŠ¡ |
| `WebSocketTransport` | ä½¿ç”¨ WebSocket åè®®é€šä¿¡ | âœ… | âœ… | âœ… é«˜ | å®æ—¶äº¤äº’ |
| `ProcessTransport` | ä¸“ä¸º LSP è®¾è®¡çš„è¿›ç¨‹é€šä¿¡å°è£… | âŒ | âŒ | âœ… | è¯­è¨€æœåŠ¡å™¨æ’ä»¶ |

---

## âš ï¸ æ³¨æ„äº‹é¡¹

| é¡¹ç›® | è¯´æ˜ |
|------|------|
| âœ… ä¼˜åŠ¿ | å¿«é€Ÿã€é«˜æ•ˆã€æ— éœ€ç½‘ç»œä¾èµ–ã€å®‰å…¨ï¼ˆæœ¬åœ°è¿›ç¨‹ï¼‰ |
| â— é™åˆ¶ | æ— æ³•è·¨æœºå™¨ã€ç®¡ç†è¿›ç¨‹ç¨æ˜¾å¤æ‚ |
| â— æ³¨æ„ | è¦å¤„ç†å¥½ buffer åˆ†å‰²ã€Content-Length è§£æé—®é¢˜ |
| ğŸš« ä¸é€‚åˆ | é«˜å¹¶å‘ / ç½‘ç»œåˆ†å¸ƒå¼åœºæ™¯ |

---

## âœ… æ€»ç»“

- `StdioClientTransport` æ˜¯åœ¨**æœ¬åœ°è¿›ç¨‹é—´é«˜æ•ˆé€šä¿¡åœºæ™¯**ä¸‹éå¸¸å¸¸è§çš„ä¼ è¾“æœºåˆ¶ã€‚
- å®ƒä¾èµ– **çˆ¶å­è¿›ç¨‹ä¹‹é—´çš„ stdin/stdout ç®¡é“** å®ç°é€šä¿¡ï¼Œå¸¸ç”¨äº AI å·¥å…·é“¾ã€ç¼–è¾‘å™¨æ’ä»¶ã€è„šæœ¬å°è£…ã€è¯­è¨€æœåŠ¡ç­‰åœºæ™¯ã€‚
- å®ƒ **ä¸ SSE/WebSocket å±äºå®Œå…¨ä¸åŒç±»åˆ«** â€”â€” SSE ç”¨äºæœåŠ¡å™¨æ¨é€ç»™æµè§ˆå™¨ï¼ŒStdio æ˜¯æœ¬åœ° IPCï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰ã€‚
